<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Mall - Home</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="../assets/index.css">
</head>
<body>

    <header class="page-header">
        <div class="header-shape shape-1"></div>
        <div class="header-shape shape-2"></div>

        <div class="container position-relative z-2">
            <nav class="navbar navbar-expand-lg d-flex justify-content-between align-items-center py-3">
                <a href="index.html" class="text-decoration-none d-flex align-items-center gap-2 text-white">
                    <i class="fa-solid fa-bag-shopping fs-3"></i>
                    <span class="fw-bold fs-4 logo-text">minimal.<span class="fw-light">mall</span></span>
                </a>
                
                <div class="header-search d-none d-md-flex align-items-center bg-white bg-opacity-25 rounded-pill px-3 py-2" style="width: 400px;">
                    <i class="fa-solid fa-magnifying-glass text-white opacity-75 me-2"></i>
                    <input type="text" id="searchInput" class="bg-transparent border-0 text-white w-100" placeholder="Looking for something?" style="outline: none;" autocomplete="off">
                </div>

                <div class="d-flex align-items-center gap-4 text-white">
                    <a href="#" class="text-white text-decoration-none fw-medium d-none d-lg-block">My Orders</a>
                    <a href="#" class="text-white text-decoration-none fw-medium d-none d-lg-block">Favorites</a>
                    <a href="#" class="text-white"><i class="fa-regular fa-bell fs-5"></i></a>
                    <a href="#" class="text-white" id="userIcon"><i class="fa-regular fa-user fs-5"></i></a>
                    <a href="#" class="text-white position-relative" id="cartIconLink">
                        <i class="fa-solid fa-cart-shopping fs-5"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cartCount" style="display: none;">
                            0
                        </span>
                    </a>
                </div>
            </nav>

            <div class="hero-content">
                <h1 class="hero-title">Featured Products</h1>
                <p class="hero-subtitle">View our latest styles from across our store below.</p>

                <div class="row g-4" id="categoryContainer">
                    <!-- Categories will be loaded here dynamically -->
                    <div class="col-12 text-center py-3">
                        <div class="spinner-border text-white" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container main-container">
        
        <div class="fav-header">
            <div class="d-flex align-items-center">
                <h2 class="section-title">Order your Favorites</h2>
                <button class="btn-add-all">
                    <i class="fa-solid fa-cart-plus me-2"></i>
                    Add Selected to Cart
                </button>
            </div>
            
            <div class="view-toggles d-none d-md-flex">
                <div class="toggle-icon active"><i class="fa-solid fa-border-all"></i></div>
                <div class="toggle-icon"><i class="fa-regular fa-square"></i></div>
            </div>
        </div>

        <div class="row g-4" id="productContainer">
            <!-- Products will be loaded here dynamically -->
            <div class="col-12 text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3 text-muted">Loading products...</p>
            </div>
        </div>

        <!-- Pagination -->
        <div class="row mt-5 mb-5" id="paginationContainer" style="display: none;">
            <div class="col-12 d-flex justify-content-center">
                <nav>
                    <ul class="pagination">
                        <li class="page-item disabled" id="prevPage">
                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                        </li>
                        <li class="page-item active" id="currentPageIndicator">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item" id="nextPage">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- Toast notification for cart -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="cartToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fa-solid fa-check-circle me-2"></i>
                    <span id="toastMessage">Items added to cart!</span>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Include auth.js for authentication -->
    <script src="../logIn Pages/js/auth.js"></script>
    
    <!-- Include cart.js for cart functionality -->
    <script src="./js/cart.js"></script>
    
    <!-- Include products.js for product functionality -->
    <script src="./js/product.js"></script>
    
    <script>
        // Additional initialization
        document.addEventListener('DOMContentLoaded', () => {
            // Check if user is logged in and update UI
            const user = getUser();
            if (user) {
                document.getElementById('userIcon').innerHTML = `
                    <i class="fa-solid fa-user fs-5"></i>
                    <small class="d-none d-lg-inline ms-1">${user.full_name.split(' ')[0]}</small>
                `;
            }
        });
        
        // Show toast notification
        function showToast(message, type = 'success') {
            const toastElement = document.getElementById('cartToast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.innerHTML = `
                <i class="fa-solid fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-circle' : 'times-circle'} me-2"></i>
                ${message}
            `;
            
            toastElement.classList.remove('bg-success', 'bg-warning', 'bg-danger');
            toastElement.classList.add(`bg-${type === 'warning' ? 'warning' : type === 'error' ? 'danger' : 'success'}`);
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }
    </script>
</body>
</html>